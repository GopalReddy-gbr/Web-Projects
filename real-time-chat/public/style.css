* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Poppins', 'Inter', sans-serif;
}

body, html {
  height: 100%;
  min-height: 100vh;
  background: linear-gradient(120deg, #17496a, #9a4ef7 70%, #0e0d1b 120%);
  overflow: hidden;
  position: relative;
}

body::before {
  content: "";
  position: fixed;
  top: -10%;
  left: -10%;
  width: 120vw;
  height: 120vh;
  background: radial-gradient(circle at 30% 70%, #7559e4 0%, #30d5c8 38%, transparent 100%);
  opacity: 0.25;
  filter: blur(50px);
  z-index: 0;
  animation: blobMove 12s linear infinite alternate;
}
@keyframes blobMove {
  to {
    top: 10%;
    left: 10%;
    transform: scale(1.05);
  }
}

body::after {
  content: "";
  position: fixed;
  top: 12%;
  left: 65%;
  width: 400px;
  height: 400px;
  border-radius: 46%;
  background: radial-gradient(circle, #30d5c8 0%, #7559e4 67%, transparent 100%);
  filter: blur(70px);
  opacity: 0.28;
  animation: blobMove2 13s linear infinite alternate;
}
@keyframes blobMove2 {
  to {
    top: 18%;
    left: 60%;
    transform: scale(1.07) rotate(11deg);
  }
}

/* Auth Modal - Glassmorphism & Animation */
#auth-modal {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(24,40,72,0.8);
  z-index: 1000;
  backdrop-filter: blur(10px);
  animation: modalFadeIn 0.8s cubic-bezier(.39,.58,.57,1) backwards;
}
@keyframes modalFadeIn {
  0% { opacity:0; transform:scale(0.8);}
  100%{ opacity:1; transform:scale(1);}
}

#auth-modal form {
  background: rgba(255,255,255, 0.25);
  border-radius: 20px;
  box-shadow: 0 8px 40px 0 rgba(30,18,91,0.15), 0 1.5px 3px 0 #4431b1;
  padding: 36px 48px;
  min-width: 340px;
  backdrop-filter: blur(8px);
  border: 1.5px solid rgba(170, 102, 245, 0.10);
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.avatar-preview-wrapper {
  display: flex;
  align-items: center;
  gap: 16px;
  justify-content: center;
  margin-bottom: -12px;
}
.avatar-img {
  width: 62px;
  height: 62px;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(120,90,245,0.14);
  transition: transform 0.2s, box-shadow 0.2s;
  animation: avatarBounce 2s infinite alternate;
}
@keyframes avatarBounce {
  0% { transform: scale(1);}
  100%{ transform: scale(1.11);}
}
#shuffle-avatar {
  background: linear-gradient(90deg, #7559e4 0%, #30d5c8 110%);
  color: white;
  border: none;
  padding: 8px 18px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  font-size: 1rem;
  transition: background 0.3s, transform 0.2s;
}
#shuffle-avatar:hover {
  background: linear-gradient(90deg, #30d5c8 0%, #7559e4 110%);
  transform: scale(1.07);
  box-shadow: 0 2px 14px #7559e4;
}

#auth-modal h2 {
  text-align: center;
  margin-bottom: 8px;
  color: #7559e4;
  letter-spacing: 0.03em;
  font-size: 1.35rem;
  font-weight: 700;
  text-shadow: 0 1px 8px rgba(120,90,245,0.22);
}

#auth-modal input {
  padding: 12px;
  border-radius: 8px;
  border: 1.5px solid #bda5e3;
  font-size: 1rem;
  background: rgba(255,255,255,0.7);
  outline: none;
  transition: border-color 0.3s, box-shadow 0.3s;
  box-shadow: 0 1.5px 7px 0 rgba(120,90,245,0.06);
}
#auth-modal input:focus {
  border-color: #30d5c8;
  box-shadow: 0 1.5px 12px 0 rgba(48,213,200,0.18);
}

#auth-modal button, button {
  background: linear-gradient(90deg, #7559e4 0%, #30d5c8 110%);
  color: white;
  border: none;
  padding: 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 700;
  font-size: 1.08rem;
  box-shadow: 0 4px 14px rgba(100,50,220,0.20);
  transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
}
#auth-modal button:hover, button:hover {
  background: linear-gradient(90deg, #30d5c8 0%, #7559e4 110%);
  box-shadow: 0 6px 18px rgba(48,213,200,0.23);
  transform: scale(1.05);
}

#auth-modal span.error-msg {
  color: #c00;
  font-size: 0.93rem;
  min-height: 20px;
  text-align: center;
  letter-spacing: 0.01em;
}

#auth-modal a {
  color: #30d5c8;
  text-align: center;
  cursor: pointer;
  font-size: 1rem;
  letter-spacing: 0.01em;
  text-decoration: none;
  transition: color 0.22s;
}
#auth-modal a:hover {
  color: #7559e4;
}

.chat-container {
  width: 430px;
  max-height: 650px;
  display: flex;
  flex-direction: column;
  background: rgba(255,255,255,0.91);
  border-radius: 22px;
  box-shadow: 0 14px 32px rgba(104,50,220,0.12), 0 2px 6px #30d5c8;
  border: 1.5px solid #7559e4;
  overflow: hidden;
  position: relative;
  z-index: 1;
  animation: slideUp 1s cubic-bezier(.39,.58,.57,1) backwards;
}

@keyframes slideUp {
  0%{opacity:0;transform:translateY(30px);}
  100%{opacity:1;transform:translateY(0);}
}

/* Header - Animated Title */
header {
  background: linear-gradient(90deg, #7559e4 0%, #30d5c8 110%);
  color: #fff;
  padding: 16px 0;
  text-align: center;
  font-size: 1.45rem;
  font-weight: 700;
  letter-spacing: 0.06em;
  position: relative;
  animation: headerGlow 2s infinite alternate;
}
@keyframes headerGlow {
  0% {text-shadow: 0 0 12px #7559e4;}
  100%{text-shadow: 0 0 24px #30d5c8;}
}

#typing {
  position: absolute;
  right: 18px;
  bottom: 10px;
  font-size: 0.8rem;
  color: #ffd700;
  font-style: italic;
  text-align: right;
  min-width: 90px;
  opacity: 0.92;
  animation: typingBlink 1.1s infinite;
}
@keyframes typingBlink {
  0%, 100% { opacity: 0.9;}
  50% { opacity: 0.45;}
}

#chat-box {
  flex: 1;
  overflow-y: auto;
  padding: 18px;
  background: linear-gradient(180deg, rgba(238,246,255,0.75) 0%, rgba(200,230,255,0.15) 100%);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.message {
  max-width: 76%;
  padding: 12px 18px;
  border-radius: 18px;
  position: relative;
  word-wrap: break-word;
  font-size: 1.07rem;
  display: flex;
  align-items: center;
  gap: 13px;
  animation: fadeInMsg 0.7s;
  transition: box-shadow 0.18s;
}
@keyframes fadeInMsg {
  0% {opacity:0; transform: translateY(16px);}
  100%{opacity:1; transform: translateY(0);}
}

.message.self {
  background: linear-gradient(90deg, #7559e4 0%, #30d5c8 140%);
  color: white;
  margin-left: auto;
  border-bottom-right-radius: 7px;
  box-shadow: 0 4px 10px rgba(120,90,245,0.09);
  border: 1.3px solid #7559e4;
}
.message.other {
  background: linear-gradient(90deg, #e0e0e0 0%, #f1f6fa 95%);
  color: #222;
  margin-right: auto;
  border-bottom-left-radius: 7px;
  box-shadow: 0 2px 7px rgba(48,213,200,0.04);
  border: 1.2px solid #30d5c8;
}

.message .text {
  flex: 1;
  animation: textPop 0.4s;
}
@keyframes textPop {
  0%{transform:scale(1.06);}
  100%{transform:scale(1);}
}

.message .user {
  font-weight: 800;
  font-size: 1.08rem;
  letter-spacing: 0.03em;
}

.message .timestamp {
  font-size: 0.81rem;
  color: #666;
  margin-left: 11px;
  font-weight: 500;
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.system-msg {
  text-align: center;
  font-style: italic;
  color: #666;
  font-size: 1rem;
  padding: 7px 0;
  opacity: 0.93;
  user-select: none;
  animation: fadeInMsg 0.7s;
}

/* Chat Input Area - Animate on focus */
form {
  display: flex;
  border-top: 2px solid #e1dffb;
  background: linear-gradient(90deg, #ededff 0%, #fafeff 110%);
  box-shadow: 0 -1px 8px rgba(120,90,245,0.07);
  padding: 3px 0;
}

input#message {
  flex: 1;
  padding: 15px 24px;
  font-size: 1rem;
  border: none;
  outline: none;
  border-radius: 0 0 0 10px;
  background: none;
  color: #3a3086;
  transition: background 0.28s, color 0.22s;
  font-weight: 700;
}
input#message:focus {
  background: #dbedff;
  color: #30d5c8;
}

button {
  background: linear-gradient(90deg, #7559e4 0%, #30d5c8 110%);
  color: white;
  border: none;
  padding: 15px 32px;
  cursor: pointer;
  font-weight: 800;
  font-size: 1.12rem;
  border-radius: 0 0 12px 0;
  letter-spacing: 0.04em;
  transition: background 0.3s, transform 0.2s;
}
button:hover {
  background: linear-gradient(90deg, #30d5c8 0%, #7559e4 110%);
  transform: scale(1.06);
  box-shadow: 0 2px 14px #7559e4;
}
